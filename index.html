<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For My Love ‚ù§Ô∏è | 7 Years of Us</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-1: #ff9a9e;
      --bg-2: #fad0c4;
      --accent: #ff4d6d;
      --text: #34313a;
      --card: rgba(255, 255, 255, 0.94);
      --shadow: 0 18px 45px rgba(44, 17, 32, 0.22);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: var(--text);
      background: linear-gradient(140deg, var(--bg-1), var(--bg-2));
      overflow: hidden;
      min-height: 100vh;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.4), transparent 35%),
        radial-gradient(circle at 85% 25%, rgba(255, 255, 255, 0.35), transparent 30%),
        radial-gradient(circle at 60% 80%, rgba(255, 180, 200, 0.25), transparent 35%);
      pointer-events: none;
      z-index: 0;
    }

    section {
      display: none;
      position: relative;
      height: 100vh;
      width: 100vw;
      padding: 28px;
      align-items: center;
      justify-content: center;
      text-align: center;
      z-index: 1;
    }

    section.active {
      display: flex;
      flex-direction: column;
      gap: 10px;
      animation: slideIn 0.55s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(16px) scale(0.98); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    h1 {
      color: var(--accent);
      margin: 0 0 10px;
      font-weight: 700;
      line-height: 1.2;
    }

    p {
      margin: 6px 0;
      max-width: 680px;
      font-size: clamp(1rem, 2.3vw, 1.1rem);
    }

    .card {
      width: min(760px, 92vw);
      background: var(--card);
      backdrop-filter: blur(5px);
      border-radius: 24px;
      padding: clamp(24px, 4vw, 40px);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255, 255, 255, 0.65);
    }

    .muted {
      font-size: 0.95rem;
      color: #6b5d65;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 12px;
      margin-top: 18px;
      min-height: 58px;
      position: relative;
    }

    button {
      padding: 12px 24px;
      border: none;
      border-radius: 999px;
      background: var(--accent);
      color: white;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.2px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s ease;
      box-shadow: 0 8px 20px rgba(255, 77, 109, 0.38);
    }

    button:hover { transform: translateY(-2px) scale(1.02); }
    button:active { transform: translateY(0) scale(0.98); }

    .secondary {
      background: #fff;
      color: var(--accent);
      border: 1px solid #ffc2ce;
      box-shadow: none;
    }

    .heart {
      position: fixed;
      top: 105vh;
      color: rgba(255, 255, 255, 0.85);
      animation: floatUp linear forwards;
      z-index: 0;
      pointer-events: none;
      text-shadow: 0 4px 10px rgba(173, 16, 48, 0.2);
    }

    @keyframes floatUp {
      to {
        transform: translateY(-120vh) rotate(20deg);
        opacity: 0;
      }
    }

    .timeline {
      text-align: left;
      margin: 18px auto 0;
      width: min(600px, 100%);
      padding-left: 18px;
    }

    .timeline li { margin: 8px 0; }

    #noBtn {
      position: absolute;
      transition: left 0.18s ease, top 0.18s ease;
    }

    /* Mini game */
    .game-wrap {
      width: min(780px, 94vw);
      margin-top: 8px;
    }

    .game-area {
      position: relative;
      width: 100%;
      height: 260px;
      border-radius: 20px;
      overflow: hidden;
      background: linear-gradient(to top, #ffd6e0 30%, #fff4f7 30%);
      border: 2px solid rgba(255, 255, 255, 0.7);
      box-shadow: var(--shadow);
    }

    .score {
      position: absolute;
      right: 14px;
      top: 10px;
      font-weight: 700;
      color: #7a3646;
      z-index: 3;
    }

    .runner {
      position: absolute;
      width: 52px;
      height: 52px;
      border-radius: 50%;
      left: 40px;
      bottom: 32px;
      background: radial-gradient(circle at 30% 30%, #ff88a0, #ff4d6d);
      box-shadow: 0 8px 16px rgba(255, 77, 109, 0.4);
      transition: bottom 0.42s cubic-bezier(.2,.8,.2,1);
      z-index: 2;
    }

    .runner::after {
      content: 'üíñ';
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      font-size: 21px;
    }

    .obstacle {
      position: absolute;
      right: -45px;
      bottom: 30px;
      width: 36px;
      height: 60px;
      border-radius: 8px;
      background: #7a5360;
      z-index: 1;
    }

    .controls {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .hidden { display: none; }

    @media (max-width: 640px) {
      #noBtn { position: static; }
      .btn-row { min-height: auto; }
      section { padding: 18px; }
    }
  </style>
</head>
<body>

<audio id="bgMusic" loop>
  <source src="song.mp3" type="audio/mpeg">
</audio>

<section id="open" class="active">
  <div class="card">
    <h1>For My Love ‚ù§Ô∏è</h1>
    <p>7 years. A million tiny moments. One person I still choose, every single day.</p>
    <p class="muted">Tap start, and let me show you our little story.</p>
    <div class="btn-row">
      <button id="startBtn" onclick="goTo('letter')">Start Our Story ‚ú®</button>
    </div>
  </div>
</section>

<section id="letter">
  <div class="card">
    <h1>My Love,</h1>
    <p>
      Seven years ago, I didn‚Äôt know that one person could feel like peace,
      laughter, adventure, and home all at once. But then there was you.
    </p>
    <p>
      Thank you for staying through the messy days and celebrating the beautiful ones.
      Thank you for growing with me and never giving up on us.
    </p>
    <ul class="timeline">
      <li><strong>Year 1:</strong> Butterflies and first memories.</li>
      <li><strong>Year 3:</strong> We learned to choose each other on hard days too.</li>
      <li><strong>Year 5:</strong> More laughter, more strength, more ‚Äúus‚Äù.</li>
      <li><strong>Year 7:</strong> Still my favorite person. Still my best decision.</li>
    </ul>
    <p><strong>Happy 7-Year Anniversary ‚ù§Ô∏è</strong></p>
    <div class="btn-row">
      <button onclick="goTo('quiz')">One Important Question üòå</button>
    </div>
  </div>
</section>

<section id="quiz">
  <div class="card">
    <h1>Okay, be honest‚Ä¶ üòè</h1>
    <p>Do you love me?</p>
    <div class="btn-row" id="quizBtns">
      <button onclick="goTo('game')">YES, OBVIOUSLY ‚ù§Ô∏è</button>
      <button id="noBtn" class="secondary" aria-label="No button that playfully escapes">No üôÉ</button>
    </div>
  </div>
</section>

<section id="game">
  <div class="card game-wrap">
    <h1>Catch the Love üíï</h1>
    <p>Press <strong>Space</strong>, tap, or click to jump. Reach 12 points to win.</p>
    <div class="game-area" id="gameArea">
      <div class="score" id="score">Score: 0</div>
      <div class="runner" id="runner"></div>
      <div class="obstacle" id="obstacle"></div>
    </div>
    <div class="controls">
      <button class="secondary" onclick="startGame()">Restart Game</button>
      <button id="finishBtn" class="hidden" onclick="goTo('end')">Continue üíå</button>
    </div>
    <p id="gameStatus" class="muted">You got this, babe ‚ú®</p>
  </div>
</section>

<section id="end">
  <div class="card">
    <h1>Always You ‚ù§Ô∏è</h1>
    <p>7 years down, forever to go.</p>
    <p>Thank you for being my safe place, my chaos partner, and my favorite hello.</p>
    <div class="btn-row">
      <button onclick="goTo('open')">Replay From Start üîÅ</button>
    </div>
  </div>
</section>

<script>
  const sections = document.querySelectorAll('section');
  const bgMusic = document.getElementById('bgMusic');

  function goTo(id) {
    sections.forEach((section) => section.classList.remove('active'));
    document.getElementById(id).classList.add('active');

    if (id === 'game') {
      startGame();
    }

    // Browsers block autoplay without user interaction; this is called by button click.
    bgMusic.play().catch(() => {});
  }

  // Floating hearts effect
  setInterval(() => {
    const heart = document.createElement('div');
    heart.className = 'heart';
    heart.textContent = Math.random() > 0.5 ? '‚ù§Ô∏è' : 'üíó';
    heart.style.left = `${Math.random() * 100}vw`;
    heart.style.fontSize = `${14 + Math.random() * 24}px`;
    heart.style.animationDuration = `${4 + Math.random() * 5}s`;
    document.body.appendChild(heart);
    setTimeout(() => heart.remove(), 9000);
  }, 400);

  // Escaping "No" button
  const noBtn = document.getElementById('noBtn');
  const quizBtns = document.getElementById('quizBtns');

  function moveNoBtn() {
    if (window.innerWidth <= 640) {
      return;
    }
    const bounds = quizBtns.getBoundingClientRect();
    const maxX = Math.max(0, bounds.width - noBtn.offsetWidth);
    const maxY = 80;
    noBtn.style.left = `${Math.random() * maxX}px`;
    noBtn.style.top = `${Math.random() * maxY}px`;
  }

  ['mouseenter', 'touchstart', 'click'].forEach((eventName) => {
    noBtn.addEventListener(eventName, (event) => {
      event.preventDefault();
      moveNoBtn();
    });
  });

  // Mini game logic
  const runner = document.getElementById('runner');
  const obstacle = document.getElementById('obstacle');
  const scoreLabel = document.getElementById('score');
  const statusLabel = document.getElementById('gameStatus');
  const finishBtn = document.getElementById('finishBtn');

  let jumping = false;
  let score = 0;
  let obstacleX = -45;
  let obstacleSpeed = 5;
  let gameLoopId = null;

  function jump() {
    if (jumping) return;
    jumping = true;
    runner.style.bottom = '120px';
    setTimeout(() => {
      runner.style.bottom = '32px';
      setTimeout(() => {
        jumping = false;
      }, 60);
    }, 430);
  }

  function resetObstacle() {
    obstacleX = -45;
    obstacle.style.right = `${obstacleX}px`;
  }

  function updateGame() {
    obstacleX += obstacleSpeed;
    obstacle.style.right = `${obstacleX}px`;

    const runnerBottom = parseInt(window.getComputedStyle(runner).bottom, 10);
    const runnerLeft = 40;
    const runnerRight = runnerLeft + 52;

    const obsRight = obstacleX;
    const obsLeft = obstacleX - 36;

    const horizontalHit = runnerRight >= obsLeft && runnerLeft <= obsRight;
    const verticalHit = runnerBottom <= 70;

    if (horizontalHit && verticalHit) {
      statusLabel.textContent = 'Oops! You hit a block. Try again üòò';
      startGame();
      return;
    }

    if (obstacleX > window.innerWidth + 60) {
      score += 1;
      scoreLabel.textContent = `Score: ${score}`;
      obstacleSpeed = Math.min(10, obstacleSpeed + 0.25);
      resetObstacle();

      if (score >= 12) {
        clearInterval(gameLoopId);
        gameLoopId = null;
        finishBtn.classList.remove('hidden');
        statusLabel.textContent = 'You win my heart every time ü•π';
      }
    }
  }

  function startGame() {
    score = 0;
    obstacleSpeed = 5;
    scoreLabel.textContent = 'Score: 0';
    statusLabel.textContent = 'You got this, babe ‚ú®';
    finishBtn.classList.add('hidden');
    runner.style.bottom = '32px';
    jumping = false;
    resetObstacle();
    if (gameLoopId) {
      clearInterval(gameLoopId);
    }
    gameLoopId = setInterval(updateGame, 16);
  }

  document.addEventListener('click', (event) => {
    const activeSection = document.querySelector('section.active');
    if (activeSection && activeSection.id === 'game') {
      const buttonClicked = event.target.closest('button');
      if (!buttonClicked) {
        jump();
      }
    }
  });

  document.addEventListener('keydown', (event) => {
    if (event.code === 'Space' && document.getElementById('game').classList.contains('active')) {
      event.preventDefault();
      jump();
    }
  });

  const crosswordAnswers = {
    a1: 'gullyboy',
    a2: 'eight',
    a3: 'talli',
    a4: 'puppy'
  };

  const crossWords = [
    { id: 'a1', word: 'gullyboy', row: 0, col: 0, dir: 'across', number: 1 },
    { id: 'a2', word: 'eight', row: 0, col: 2, dir: 'down', number: 2 },
    { id: 'a3', word: 'talli', row: 2, col: 2, dir: 'across', number: 3 },
    { id: 'a4', word: 'puppy', row: 0, col: 5, dir: 'down', number: 4 }
  ];

  const gridSize = 8;
  const crossGrid = document.getElementById('crossGrid');
  const statusLabel = document.getElementById('gameStatus');
  const finishBtn = document.getElementById('finishBtn');

  function buildGrid(correctIds = []) {
    crossGrid.innerHTML = '';
    const map = {};

    crossWords.forEach(({ id, word, row, col, dir, number }) => {
      word.split('').forEach((letter, i) => {
        const r = dir === 'across' ? row : row + i;
        const c = dir === 'across' ? col + i : col;
        const key = `${r}-${c}`;

        if (!map[key]) {
          map[key] = { letter, numbers: [number], owners: [id] };
        } else {
          map[key].letter = letter;
          map[key].owners.push(id);
        }
      });
    });

    for (let r = 0; r < gridSize; r += 1) {
      for (let c = 0; c < gridSize; c += 1) {
        const cell = document.createElement('div');
        const key = `${r}-${c}`;
        const data = map[key];

        if (data) {
          const isCorrect = data.owners.some((owner) => correctIds.includes(owner));
          cell.className = `cell filled${isCorrect ? ' ok' : ''}`;
          cell.textContent = data.letter;
          const numberHere = crossWords.find((w) => w.row === r && w.col === c)?.number;
          if (numberHere) {
            const n = document.createElement('span');
            n.className = 'n';
            n.textContent = numberHere;
            cell.appendChild(n);
          }
        } else {
          cell.className = 'cell';
          cell.style.opacity = '0.2';
        }

        crossGrid.appendChild(cell);
      }
    }
  }

  function clean(value) {
    return value.toLowerCase().replace(/\s+/g, '');
  }

  function checkCrossword() {
    const correct = [];

    Object.entries(crosswordAnswers).forEach(([id, answer]) => {
      const input = document.getElementById(id);
      if (clean(input.value) === answer) {
        correct.push(id);
        input.style.borderColor = '#76d7a4';
        input.style.background = '#f0fff7';
      } else {
        input.style.borderColor = '#ff8fab';
        input.style.background = '#fff5f7';
      }
    });

    buildGrid(correct);

    if (correct.length === 4) {
      statusLabel.innerHTML = '<span class="result-ok">Perfect! You know us too well ü•πüíñ</span>';
      finishBtn.classList.remove('hidden');
    } else {
      statusLabel.textContent = `You got ${correct.length}/4 right. Try again, love üíï`;
      finishBtn.classList.add('hidden');
    }
  }

  function resetCrossword() {
    Object.keys(crosswordAnswers).forEach((id) => {
      const input = document.getElementById(id);
      input.value = '';
      input.style.borderColor = '#f0b7c8';
      input.style.background = 'white';
    });
    finishBtn.classList.add('hidden');
    statusLabel.textContent = 'Hint: answers are all one word, lowercase is okay.';
    buildGrid([]);
  }

  buildGrid([]);
</script>

</body>
</html>
